<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vitor & Sarah â€” Nosso Tempo</title>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1:#fff4f8; --bg-2:#fffafc;
      --accent:#e84a7a; --accent-2:#ff87b8;
      --text:#4d2133; --card:#ffffff; --muted:#8b596f;
      --glass:rgba(255,255,255,0.6);
      --shadow:0 10px 30px rgba(88,24,55,0.08);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Montserrat',system-ui,-apple-system,'Segoe UI',Roboto,Arial;
      background:linear-gradient(180deg,var(--bg-1),var(--bg-2));
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    /* frame and header */
    .frame{width:100%;max-width:1060px}
    .header{display:flex;align-items:center;justify-content:center;position:relative;margin-bottom:18px}
    .brand h1{font-family:'Pacifico',cursive;color:var(--accent);font-size:2rem;padding:10px 18px;border-radius:12px;background:linear-gradient(90deg,rgba(255,255,255,0.6),rgba(255,255,255,0.4));box-shadow:var(--shadow)}
    .tools{position:absolute;right:0;top:6px}
    .icon-btn{background:linear-gradient(180deg,#ffdfe9,#ffcde0);border:none;padding:8px 10px;border-radius:10px;cursor:pointer;box-shadow:0 6px 18px rgba(88,24,55,0.06)}

    /* layout */
    .main{display:flex;flex-direction:column;gap:14px}
    .card{background:var(--card);border-radius:14px;padding:16px;box-shadow:var(--shadow)}
    .counters{display:grid;grid-template-columns:1fr 1fr;gap:14px}

    /* counters */
    .counter-card h2{font-family:'Pacifico',cursive;color:var(--accent);margin-bottom:6px}
    .big-time{font-size:1.15rem;font-weight:700;color:#9a2b57;background:linear-gradient(90deg,#fff6fb,#fff0f6);padding:12px 14px;border-radius:10px;display:inline-block;min-width:220px;text-align:center}
    .muted{color:var(--muted);font-size:0.92rem;margin-top:8px}

    /* progress */
    .progress-track{margin-top:10px;height:10px;background:#fff0f5;border-radius:999px;overflow:hidden}
    .progress{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width 600ms ease}

    /* gallery with heart mask */
    .gallery{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:10px}
    .photo{width:30%;min-width:160px;border-radius:12px;overflow:hidden;background:var(--glass);cursor:pointer;box-shadow:0 8px 26px rgba(88,24,55,0.06);transition:transform 220ms ease,box-shadow 220ms ease;display:flex;align-items:center;justify-content:center}
    .photo img{width:100%;height:170px;object-fit:cover;display:block;
    -webkit-mask-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 29'><path d='M23.6 0c-2.8 0-4.9 1.9-5.6 3.3C17.3 1.9 15.2 0 12.4 0 8.1 0 5 3.1 5 7.4 5 13.7 16 21 16 21s11-7.3 11-13.6C27 3.1 23.9 0 19.6 0z' fill='white'/></svg>");
    -webkit-mask-size:cover;mask-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 29'><path d='M23.6 0c-2.8 0-4.9 1.9-5.6 3.3C17.3 1.9 15.2 0 12.4 0 8.1 0 5 3.1 5 7.4 5 13.7 16 21 16 21s11-7.3 11-13.6C27 3.1 23.9 0 19.6 0z' fill='white'/></svg>");
    mask-size:cover}
    .photo:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 14px 36px rgba(88,24,55,0.12)}

    /* actions */
    .actions .row{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-bottom:12px}
    button{background:linear-gradient(180deg,#ffd7e7,#ffb9d3);border:none;color:var(--text);padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;transition:transform 160ms ease,box-shadow 160ms ease}
    button:hover{transform:translateY(-4px);box-shadow:0 8px 18px rgba(88,24,55,0.08)}
    .random-text{text-align:center;color:#7a2b4d;font-size:1rem;padding:8px 6px}

    /* footer */
    .footer{text-align:center;color:var(--muted);margin-top:8px;font-weight:600}

    /* modal */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);opacity:0;pointer-events:none;transition:opacity 200ms ease;padding:16px}
    .modal[aria-hidden="false"]{opacity:1;pointer-events:auto}
    .modal-box{background:white;border-radius:12px;max-width:920px;width:100%;padding:14px;position:relative;box-shadow:0 24px 60px rgba(0,0,0,0.35)}
    .modal img{max-height:78vh;width:auto;max-width:100%;display:block;margin:0 auto 8px}
    .modal-close{position:absolute;right:12px;top:8px;background:transparent;border:none;font-size:1.05rem;cursor:pointer}

    /* floating hearts */
    .float-thing{position:fixed;font-size:1.6rem;pointer-events:none;animation:floatUp 2600ms ease forwards;user-select:none}
    @keyframes floatUp{from{transform:translateY(0) scale(1);opacity:1}to{transform:translateY(-220px) scale(0.85);opacity:0}}

    /* dark theme */
    body.dark{background:linear-gradient(180deg,#0f1022,#120616);color:#f6e9ef}
    body.dark .card{background:#151226}
    body.dark .big-time{background:linear-gradient(90deg,#24102a,#1a0713);color:#ffd7eb}
    body.dark .photo{background:rgba(255,255,255,0.02)}
  </style>
</head>
<body>
  <div class="frame">
    <header class="header">
      <div class="brand">
        <h1>Vitor & Sarah</h1>
      </div>
      <div class="tools">
        <button id="themeToggle" class="icon-btn" aria-label="Alternar tema">ðŸŒ—</button>
      </div>
    </header>

    <main class="main">
      <section class="card counters">
        <div class="card counter-card">
          <h2>Tempo juntos</h2>
          <div id="totalDays" class="big-time">-- dias</div>
          <div id="detailedTime" class="muted">-- anos â€¢ -- meses â€¢ -- dias â€¢ 00:00:00</div>
        </div>

        <div class="card counter-card">
          <h2>PrÃ³ximo mÃªsversÃ¡rio</h2>
          <div id="nextCountdown" class="big-time">Carregando...</div>
          <div class="progress-track" aria-hidden="true">
            <div id="monthProgress" class="progress"></div>
          </div>
          <p class="muted">MÃªsversÃ¡rio dia 4 de cada mÃªs</p>
        </div>
      </section>

      <section class="card counters">
        <div class="card counter-card">
          <h2>Contagem para o reencontro</h2>
          <div id="reunionCountdown" class="big-time">Carregando...</div>
          <p class="muted">Chegada prevista: 05/03/2026</p>
        </div>

        <div class="card counter-card">
          <h2>Mensagem do dia</h2>
          <div id="dailyMessage" class="big-time muted">Carregando...</div>
          <div class="row" style="margin-top:10px;">
            <button id="newDailyBtn">â†» Nova (hoje)</button>
            <button id="toggleHearts">ðŸ’ž Amor sem fim</button>
            <button id="showQR">ðŸŽµ Gerar QR</button>
          </div>
        </div>
      </section>

      <section class="card moments">
        <h2>Nossos Momentos</h2>
        <p class="muted">Toque na foto para ampliar</p>
        <div class="gallery" id="gallery">
          <figure class="photo">
            <img src="./WhatsApp Image 2025-04-04 at 14.49.26 (1).jpeg" alt="NÃ³s sorrindo juntos" data-caption="PraÃ§a, risos e sol">
          </figure>

          <figure class="photo">
            <img src="./WhatsApp Image 2025-04-04 at 14.37.58.jpeg" alt="Sorrisos compartilhados" data-caption="Noite de pizza e filme">
          </figure>

          <figure class="photo">
            <img src="./WhatsApp Image 2025-04-04 at 14.49.26.jpeg" alt="Momentos felizes" data-caption="Nosso abraÃ§o preferido">
          </figure>
        </div>
      </section>

      <section class="card actions">
        <h2>AÃ§Ãµes</h2>
        <div class="row">
          <button id="randomMsgBtn">ðŸ’Œ Nova frase</button>
          <button id="kissBtn">ðŸ˜˜ Beijo</button>
          <button id="hugBtn">ðŸ¤— AbraÃ§o</button>
        </div>
        <div id="randomMsg" class="random-text">VocÃª Ã© meu motivo favorito para sorrir.</div>
      </section>

      <section id="qrcode-section" class="card">
        <h2>Compartilhe Nosso Amor</h2>
        <div id="qrcodeWrap" style="display:flex;gap:12px;align-items:center;justify-content:center;flex-direction:column">
          <div id="qrcode" aria-hidden="true"></div>
          <a id="spotifyLink" href="https://open.spotify.com/track/3KYlOzxN5xO7eEauO1VF06?si=d28c0866cc564af4" target="_blank" rel="noopener" class="muted">Abrir mÃºsica no Spotify</a>
        </div>

        <div id="spotifyEmbed" style="margin-top:16px;display:block">
          <iframe id="spotifyIframe" style="border-radius:12px;box-shadow:0 8px 24px rgba(88,24,55,0.12)" src="https://open.spotify.com/embed/track/3KYlOzxN5xO7eEauO1VF06?utm_source=generator" width="100%" height="92" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>Feito com carinho para Sarah ðŸ’–</div>
    </footer>
  </div>

  <!-- modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-box" role="dialog" aria-modal="true">
      <button id="modalClose" class="modal-close" aria-label="Fechar">âœ•</button>
      <img id="modalImg" src="" alt="">
      <p id="modalCaption" class="muted"></p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // constantes
      const START = new Date("2024-10-04T00:00:00");
      const REUNION = new Date("2026-03-05T00:00:00"); // chegada prevista

      // elementos
      const totalDaysEl = document.getElementById("totalDays");
      const detailedTimeEl = document.getElementById("detailedTime");
      const nextCountdownEl = document.getElementById("nextCountdown");
      const monthProgressEl = document.getElementById("monthProgress");
      const reunionCountdownEl = document.getElementById("reunionCountdown");
      const dailyMessageEl = document.getElementById("dailyMessage");
      const newDailyBtn = document.getElementById("newDailyBtn");
      const toggleHeartsBtn = document.getElementById("toggleHearts");
      const randomMsgBtn = document.getElementById("randomMsgBtn");
      const randomMsgEl = document.getElementById("randomMsg");
      const kissBtn = document.getElementById("kissBtn");
      const hugBtn = document.getElementById("hugBtn");
      const gallery = document.getElementById("gallery");
      const modal = document.getElementById("modal");
      const modalImg = document.getElementById("modalImg");
      const modalCaption = document.getElementById("modalCaption");
      const modalClose = document.getElementById("modalClose");
      const themeToggle = document.getElementById("themeToggle");
      const showQRBtn = document.getElementById("showQR");
      const qrcodeEl = document.getElementById("qrcode");
      const spotifyEmbed = document.getElementById("spotifyEmbed");

      // frases e mensagens
      const phrases = [
        "VocÃª Ã© meu motivo favorito para sorrir.",
        "Cada dia com vocÃª Ã© um presente.",
        "Seu abraÃ§o Ã© meu lugar seguro.",
        "A gente e o mundo, no mesmo ritmo.",
        "Sorrio sÃ³ de lembrar de vocÃª.",
        "Meu amor cresce um pouco mais a cada dia.",
        "Nosso tempo juntos Ã© meu lugar favorito."
      ];

      const dailyPhrases = [
        "Bom dia, meu amor. Que seu dia seja doce.",
        "Hoje penso em vocÃª sempre que respiro.",
        "Sorria, vocÃª Ã© a minha melhor lembranÃ§a.",
        "Pequenos gestos, grande amor. Tenha um Ã³timo dia.",
        "Que hoje sobre amor e abraÃ§os para nÃ³s."
      ];

      // helpers
      function pad(n){ return String(n).padStart(2,"0"); }

      function computeYMDHMS(from, to){
        let y = to.getFullYear() - from.getFullYear();
        let m = to.getMonth() - from.getMonth();
        let d = to.getDate() - from.getDate();
        let hh = to.getHours() - from.getHours();
        let mm = to.getMinutes() - from.getMinutes();
        let ss = to.getSeconds() - from.getSeconds();

        if (ss < 0){ ss += 60; mm -= 1; }
        if (mm < 0){ mm += 60; hh -= 1; }
        if (hh < 0){ hh += 24; d -= 1; }

        if (d < 0){
          const prevMonthDays = new Date(to.getFullYear(), to.getMonth(), 0).getDate();
          d += prevMonthDays;
          m -= 1;
        }
        if (m < 0){ m += 12; y -= 1; }

        return { years: y, months: m, days: d, hours: hh, minutes: mm, seconds: ss };
      }

      // timers
      function updateTotalTime(){
        const now = new Date();
        const diff = now - START;
        const totalDays = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff / (1000*60*60)) % 24);
        const minutes = Math.floor((diff / (1000*60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);

        totalDaysEl.textContent = `${totalDays} dias juntos`;
        const t = computeYMDHMS(START, now);
        detailedTimeEl.textContent = `${t.years} anos â€¢ ${t.months} meses â€¢ ${t.days} dias â€¢ ${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
      }

      function nextDay4Reference(now){
        let year = now.getFullYear();
        let month = now.getMonth();
        let candidate = new Date(year, month, 4, 0,0,0);
        if (now.getDate() >= 4 && now >= candidate){
          candidate = new Date(year, month + 1, 4, 0,0,0);
        }
        return candidate;
      }

      function updateNextCountdown(){
        const now = new Date();
